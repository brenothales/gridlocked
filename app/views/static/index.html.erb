<script src = "https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<% if current_user %>
		<% if !@posts.blank? %>
			<script>
				function initialize() {
					if (navigator.geolocation) {
						navigator.geolocation.getCurrentPosition(showPosition);
					} else {
						alert("Geolocation is not working");
					}
				}
				function showPosition(position) {
					var myLatlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
					var mapOptions = {
						zoom: 15,
						center: myLatlng
					};

					var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

					<%= render partial: "posts/post", collection: @posts %>
				}
				google.maps.event.addDomListener(window, 'load', initialize);
			</script>
		<% else %>
			<h4>No one is complaining. <%= link_to "Click here to start voicing some opinions", new_post_path %></h4>
		<% end %>
		<div id="map-container">
			<div id="map-canvas" style="width:100%; height:90vh;"></div>
		</div>
<% else %>
	<h1>Static#index</h1>
	<p>Find me in app/views/static/index.html.erb</p>
<% end %>